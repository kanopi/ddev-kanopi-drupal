name: ddev-kanopi-pantheon-drupal

# Based on https://github.com/ddev/ddev/blob/HEAD/pkg/ddevapp/addons.go#L61
project_files:
- commands/
- providers/

# DDEV version constraint
ddev_version_constraint: ">= v1.22.0"

# Pre-install actions
pre_install_actions:
# Create the addon directory
- |
  #ddev-nodisplay
  #ddev-description:Installing Kanopi Pantheon Drupal Add-on

# Post-install actions
post_install_actions:
- ddev dotenv set .ddev/.env.web --theme=themes/custom/themename --themename=themename --hostingsite=sitename --hostingenv=siteenv --migrate-db-source=d7sitename --migrate-db-env=d7siteenv
# Explain the installed components
- |
  echo ""
  echo "âœ… Kanopi Pantheon Drupal Add-on installed successfully!"
  echo ""
  echo "ðŸ“¦ Installed components:"
  echo "   â€¢ Enhanced Pantheon provider with smart backup management"
  echo "   â€¢ 17 custom commands for Drupal development workflow"
  echo "   â€¢ Theme development tools with Node.js/NPM support"
  echo "   â€¢ Cypress testing integration"
  echo "   â€¢ Drupal Recipe support"
  echo "   â€¢ Migration and backup utilities"
  echo ""
  echo "ðŸ”§ Next steps:"
  echo "   1. Set your Pantheon machine token (if you haven't already):"
  echo "      ddev config global --web-environment-add=TERMINUS_MACHINE_TOKEN=your_token_here"
  echo "   2. Configure your Pantheon project in .ddev/providers/pantheon.yaml"
  echo "   3. Update environment variables in .ddev/config.yaml (theme paths, site names, etc.)"
  echo "   4. Run 'ddev restart' to apply changes"
  echo ""
  echo "ðŸ“š Run 'ddev help' to see available commands"
  echo ""

removal_action:
# Note what's being removed
- |
  echo "Removing Kanopi Pantheon Drupal Add-on..."
